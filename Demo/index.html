<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Demo site for PopupMovable Plug-in</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css" integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ==" crossorigin="" />
  <script src="leaflet-src.js"></script>
  <!--<script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js" integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ==" crossorigin=""></script>-->
  <script src="../leaflet.PopupMovable.js"></script>
  <script src="SmoothWheelZoom.js"></script>
  
  <style>
		html, body {
			height: 100%;
			margin: 0;
		}
		.leaflet-container {
			height: 400px;
			width: 600px;
			max-width: 100%;
			max-height: 100%;
		}
	</style>

  <script>
    function init(){
      //initialize L.Map
      const Lmap = new L.map('MapContainer', {
        popupMovable: true,//set 'true' for enable this plugin.
        popupMovableZoomMode: 'relative',
        closePopupOnClick: false,//when using the plugin ,this option are recommend 'false'.
        zoomControl: true,
        preferCanvas: true,
        fullscreenControl: true,
        scrollWheelZoom: false, // disable original zoom function
        smoothWheelZoom: true,  // enable smooth zoom 
        smoothSensitivity: 1,   // zoom speed. default is 1
      }).setView([35.2, 136.9], 5);

      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(Lmap);

      //create Popup's for demo.
      const popup = L.popup({
        //recommend set 'false'.
        autoClose:false
      }).setContent("It's Movable.\n(Draggable)");
      L.circleMarker([37.75,140.47]).addTo(Lmap).bindPopup(popup).openPopup();

      L.popup({
        autoClose:false,
        popupmovable:false
      }).setLatLng([35.36, 137.09])
        .setContent('It can also be disabled individually.')
        .openOn(Lmap);

      //standalone popup(not bind for any markers.)
      L.popup({autoClose:false})
        .setLatLng([35.36, 137.09])
        .setContent('Standalone popup are movable too.')
        .openOn(Lmap);


      const icon = new L.icon({
        iconUrl:'marker-icon.png',
        iconSize: [20, 40],
        iconAnchor: [10, 40],
        popupAnchor: [0, -30],
      })
      const popup2 = new L.Popup({
        autoClose:false,
        offset:[0,10]
      }).setContent("Supported for <br>popupAnchor of L.icon<br>and offset of L.Popup.");
      L.marker([26.2,127.68],{icon: icon}).addTo(Lmap).bindPopup(popup2).openPopup();
    }
      
      

  </script>
</head>
<body onload="init()">
  <div id="MapContainer" style="width: 100%; height: 100%;"></div>
</body>
</html>
